{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "animated-text",
  "type": "registry:component",
  "title": "Animated Text",
  "description": "A flexible text animation component with multiple animation presets including blur, fade, scale, and slide effects. Supports character, word, and line-based animations.",
  "dependencies": [
    "motion",
    "clsx",
    "tailwind-merge"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/default/animated-text.tsx",
      "content": "'use client';\n\nimport { cn } from '@/lib/utils';\nimport { AnimatePresence, motion } from 'motion/react';\nimport type {\n  TargetAndTransition,\n  Transition,\n  Variant,\n  Variants,\n} from 'motion/react';\nimport React from 'react';\n\nexport type AnimationPreset = 'blur' | 'fade-in-blur' | 'scale' | 'fade' | 'slide';\nexport type AnimationUnit = 'word' | 'char' | 'line';\n\nexport interface TextEffectProps {\n  children: string;\n  per?: AnimationUnit;\n  as?: keyof React.JSX.IntrinsicElements;\n  variants?: {\n    container?: Variants;\n    item?: Variants;\n  };\n  className?: string;\n  preset?: AnimationPreset;\n  delay?: number;\n  speedReveal?: number;\n  speedSegment?: number;\n  trigger?: boolean;\n  onAnimationComplete?: () => void;\n  onAnimationStart?: () => void;\n  segmentWrapperClassName?: string;\n  containerTransition?: Transition;\n  segmentTransition?: Transition;\n  style?: React.CSSProperties;\n}\n\ninterface AnimationSegmentProps {\n  segment: string;\n  variants: Variants;\n  unit: AnimationUnit;\n  wrapperClassName?: string;\n}\n\n// ============================================================================\n// Animation Configuration\n// ============================================================================\n\nconst STAGGER_TIMING: Record<AnimationUnit, number> = {\n  char: 0.03,\n  word: 0.05,\n  line: 0.1,\n} as const;\n\nconst BASE_CONTAINER_VARIANTS: Variants = {\n  hidden: { opacity: 0 },\n  visible: {\n    opacity: 1,\n    transition: {\n      staggerChildren: 0.05,\n    },\n  },\n  exit: {\n    transition: { staggerChildren: 0.05, staggerDirection: -1 },\n  },\n} as const;\n\nconst BASE_ITEM_VARIANTS: Variants = {\n  hidden: { opacity: 0 },\n  visible: { opacity: 1 },\n  exit: { opacity: 0 },\n} as const;\n\n// ============================================================================\n// Preset Animation Variants\n// ============================================================================\n\nconst ANIMATION_PRESETS: Record<\n  AnimationPreset,\n  { container: Variants; item: Variants }\n> = {\n  fade: {\n    container: BASE_CONTAINER_VARIANTS,\n    item: BASE_ITEM_VARIANTS,\n  },\n  blur: {\n    container: BASE_CONTAINER_VARIANTS,\n    item: {\n      hidden: { opacity: 0, filter: 'blur(12px)' },\n      visible: { opacity: 1, filter: 'blur(0px)' },\n      exit: { opacity: 0, filter: 'blur(12px)' },\n    },\n  },\n  'fade-in-blur': {\n    container: BASE_CONTAINER_VARIANTS,\n    item: {\n      hidden: { opacity: 0, y: 20, filter: 'blur(12px)' },\n      visible: { opacity: 1, y: 0, filter: 'blur(0px)' },\n      exit: { opacity: 0, y: 20, filter: 'blur(12px)' },\n    },\n  },\n  scale: {\n    container: BASE_CONTAINER_VARIANTS,\n    item: {\n      hidden: { opacity: 0, scale: 0 },\n      visible: { opacity: 1, scale: 1 },\n      exit: { opacity: 0, scale: 0 },\n    },\n  },\n  slide: {\n    container: BASE_CONTAINER_VARIANTS,\n    item: {\n      hidden: { opacity: 0, y: 20 },\n      visible: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: 20 },\n    },\n  },\n} as const;\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\n/**\n * Splits text based on the specified animation unit\n */\nfunction splitTextByUnit(text: string, unit: AnimationUnit): string[] {\n  if (unit === 'line') return text.split('\\n');\n  return text.split(/(\\s+)/);\n}\n\n/**\n * Type guard to check if a variant has transition properties\n */\nfunction isVariantWithTransition(\n  variant?: Variant\n): variant is TargetAndTransition & { transition?: Transition } {\n  return Boolean(\n    variant && typeof variant === 'object' && 'transition' in variant\n  );\n}\n\n/**\n * Merges base variants with custom transition timing\n */\nfunction mergeVariantsWithTransition(\n  baseVariants: Variants,\n  transition?: Transition & { exit?: Transition }\n): Variants {\n  if (!transition) return baseVariants;\n\n  const { exit: exitTransition, ...mainTransition } = transition;\n\n  return {\n    ...baseVariants,\n    visible: {\n      ...baseVariants.visible,\n      transition: {\n        ...(isVariantWithTransition(baseVariants.visible)\n          ? baseVariants.visible.transition\n          : {}),\n        ...mainTransition,\n      },\n    },\n    exit: {\n      ...baseVariants.exit,\n      transition: {\n        ...(isVariantWithTransition(baseVariants.exit)\n          ? baseVariants.exit.transition\n          : {}),\n        ...mainTransition,\n        staggerDirection: -1,\n      },\n    },\n  };\n}\n\n// ============================================================================\n// Animation Segment Component\n// ============================================================================\n\nconst AnimatedSegment = React.memo<AnimationSegmentProps>(\n  ({ segment, variants, unit, wrapperClassName }) => {\n    // Render based on animation unit\n    const renderContent = () => {\n      switch (unit) {\n        case 'line':\n          return (\n            <motion.span variants={variants} className='block'>\n              {segment}\n            </motion.span>\n          );\n\n        case 'word':\n          return (\n            <motion.span\n              aria-hidden='true'\n              variants={variants}\n              className='inline-block whitespace-pre'\n            >\n              {segment}\n            </motion.span>\n          );\n\n        case 'char':\n          return (\n            <motion.span className='inline-block whitespace-pre'>\n              {segment.split('').map((char, index) => (\n                <motion.span\n                  key={`char-${index}`}\n                  aria-hidden='true'\n                  variants={variants}\n                  className='inline-block whitespace-pre'\n                >\n                  {char}\n                </motion.span>\n              ))}\n            </motion.span>\n          );\n      }\n    };\n\n    const content = renderContent();\n\n    // Apply wrapper className if provided\n    if (!wrapperClassName) {\n      return content;\n    }\n\n    const baseClassName = unit === 'line' ? 'block' : 'inline-block';\n\n    return (\n      <span className={cn(baseClassName, wrapperClassName)}>{content}</span>\n    );\n  }\n);\n\nAnimatedSegment.displayName = 'AnimatedSegment';\n\n// ============================================================================\n// Main Text Effect Component\n// ============================================================================\n\nexport function TextEffect({\n  children,\n  per = 'word',\n  as = 'p',\n  variants: customVariants,\n  className,\n  preset = 'fade',\n  delay = 0,\n  speedReveal = 1,\n  speedSegment = 1,\n  trigger = true,\n  onAnimationComplete,\n  onAnimationStart,\n  segmentWrapperClassName,\n  containerTransition,\n  segmentTransition,\n  style,\n}: TextEffectProps) {\n  // Split text into segments based on animation unit\n  const textSegments = splitTextByUnit(children, per);\n\n  // Get the appropriate motion component for the HTML element\n  const MotionElement = motion[as as keyof typeof motion] as typeof motion.div;\n\n  // Select base animation variants from preset or defaults\n  const baseAnimationVariants = preset\n    ? ANIMATION_PRESETS[preset]\n    : { container: BASE_CONTAINER_VARIANTS, item: BASE_ITEM_VARIANTS };\n\n  // Calculate timing values\n  const staggerDelay = STAGGER_TIMING[per] / speedReveal;\n  const animationDuration = 0.3 / speedSegment;\n\n  // Extract custom timing from user-provided variants\n  const containerVisible = customVariants?.container?.visible;\n  const customStagger = isVariantWithTransition(containerVisible)\n    ? containerVisible.transition?.staggerChildren\n    : undefined;\n\n  const customDelayChildren = isVariantWithTransition(containerVisible)\n    ? containerVisible.transition?.delayChildren\n    : undefined;\n\n  // Build final animation variants\n  const finalVariants = {\n    container: mergeVariantsWithTransition(\n      customVariants?.container ?? baseAnimationVariants.container,\n      {\n        staggerChildren: customStagger ?? staggerDelay,\n        delayChildren: customDelayChildren ?? delay,\n        ...containerTransition,\n        exit: {\n          staggerChildren: customStagger ?? staggerDelay,\n          staggerDirection: -1,\n        },\n      }\n    ),\n    item: mergeVariantsWithTransition(\n      customVariants?.item ?? baseAnimationVariants.item,\n      {\n        duration: animationDuration,\n        ...segmentTransition,\n      }\n    ),\n  };\n\n  return (\n    <AnimatePresence mode='popLayout'>\n      {trigger && (\n        <MotionElement\n          initial='hidden'\n          animate='visible'\n          exit='exit'\n          variants={finalVariants.container}\n          className={className}\n          onAnimationComplete={onAnimationComplete}\n          onAnimationStart={onAnimationStart}\n          style={style}\n        >\n          {/* Screen reader accessible text */}\n          {per !== 'line' && <span className='sr-only'>{children}</span>}\n\n          {/* Animated segments */}\n          {textSegments.map((segment, index) => (\n            <AnimatedSegment\n              key={`${per}-${index}-${segment}`}\n              segment={segment}\n              variants={finalVariants.item}\n              unit={per}\n              wrapperClassName={segmentWrapperClassName}\n            />\n          ))}\n        </MotionElement>\n      )}\n    </AnimatePresence>\n  );\n}\n",
      "type": "registry:component"
    }
  ],
  "categories": [
    "animations",
    "text-effects"
  ]
}